<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobMatch</title>
    <link rel="stylesheet" href="/css/Home.css">
    <link rel="stylesheet" href="/css/UserProfile.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
    <header>
        <div class="search-bar">
            <input type="text" placeholder="Search...">
            <button class="search-btn">
                <img src="/images/Search.png" alt="Search">
            </button>
        </div>
        <!-- Profile -->
    <a href="UserProfile.html" class="profile-container">
    <img src="/images/Profile.png" alt="Profile Picture" class="profile-img">
    <div class="profile-info">
        <span class="profile-name">Tracy Veloria</span>
        <span class="profile-role">Job Seeker</span>
    </div>
    </a>
    </header>

    <div class="container">
        <aside class="sidebar">
            <ul>
                <div class="logo">LOGO</div>
                <a href="Home.html">
                    <i class="bi bi-house"></i>
                </a>
                <a href="Chats.html">
                    <i class="bi bi-chat-dots"></i>
                </a>
                <a href="addfriend.html">
                    <i class="bi bi-person-plus"></i>
                </a>
                <a href="Applicants.html">
                    <i class="bi bi-briefcase"></i>
                </a>
                <a href="Companies.html">
                    <i class="bi bi-building"></i>
                </a>
                <a href="EmployeeMarked.html">
                    <i class="bi bi-person-check"></i>
                </a>
                <a href="CompaniesMarked.html">
                    <i class="bi bi-building-check"></i>
                </a>
            </ul>
        </aside>

        <main class="feed">
            <div class="post-box">
                <input type="text" id="post-text" placeholder="Post a job or update...">
                <div class="file-upload-container">
                    <input type="file" id="post-image" accept="image/*" style="display: none;">
                    <label for="post-image" class="custom-file-upload">
                        <i class="bi bi-image"></i>
                    </label>
                </div>
                <!-- Image Preview Area -->
                <div id="image-preview-container" class="image-preview-container" style="display: none;">
                    <img id="image-preview" class="image-preview">
                </div>

                <button id="post-button">Post</button>
            </div>

            <div class="post">
                <div class="post-header">
                    <span class="poster-name">XYZ Tech</span>
                    <span class="post-time">2h ago</span>
                </div>
                <p>🚀 Hiring for a Senior Backend Developer - Remote 🌎. Apply now!</p>
                <div class="post-actions">
                    <button>👍 Like</button>
                    <button>💬 Comment</button>
                    <button>🔗 Apply</button>
                </div>
            </div>

            <div class="post">
                <div class="post-header">
                    <span class="poster-name">John Doe</span>
                    <span class="post-time">5h ago</span>
                </div>
                <p>I'm an experienced UI/UX designer looking for freelance projects!</p>
                <div class="post-actions">
                    <button>👍 Like</button>
                    <button>💬 Comment</button>
                    <button>🔗 View Profile</button>
                </div>
            </div>
        </main>

        <aside class="right-sidebar">
            <h3>Recommended Jobs</h3>
            <ul>
                <li>🛠 Frontend Developer – Google <br> 📍 Remote | 💰 $80K–$100K</li>
                <li>💼 Product Manager – Amazon <br> 📍 On-site | 💰 $120K–$150K</li>
                <li>📊 Data Scientist – Tesla <br> 📍 Hybrid | 💰 $90K–$110K</li>
            </ul>

            <h3>Notifications</h3>
            <ul>
                <li>📩 New message from Google Recruiter</li>
                <li>🔔 Tesla just posted a job that matches your skills!</li>
            </ul>
        </aside>
    </div>
    <script>
        document.getElementById("post-image").addEventListener("change", function (event) {
            const file = event.target.files[0];
    
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = new Image();
                    img.src = e.target.result;
    
                    img.onload = function () {
                        const canvas = document.createElement("canvas");
                        const ctx = canvas.getContext("2d");
    
                        // Set new image dimensions
                        const maxWidth = 400; // Resize width
                        const maxHeight = 250; // Resize height
                        let width = img.width;
                        let height = img.height;
    
                        // Maintain aspect ratio
                        if (width > height) {
                            if (width > maxWidth) {
                                height *= maxWidth / width;
                                width = maxWidth;
                            }
                        } else {
                            if (height > maxHeight) {
                                width *= maxHeight / height;
                                height = maxHeight;
                            }
                        }
    
                        canvas.width = width;
                        canvas.height = height;
                        ctx.drawImage(img, 0, 0, width, height);
    
                        // Convert the resized image to a new file
                        const resizedImage = canvas.toDataURL("image/png");
    
                        // Display preview in post-box
                        const previewContainer = document.getElementById("image-preview-container");
                        const previewImage = document.getElementById("image-preview");
                        previewImage.src = resizedImage;
                        previewContainer.style.display = "block";
                    };
                };
                reader.readAsDataURL(file);
            }
        });
    
        document.getElementById("post-button").addEventListener("click", function () {
            const postText = document.getElementById("post-text").value;
            const previewImage = document.getElementById("image-preview").src;
    
            if (!postText && previewImage === "") {
                alert("Please enter text or upload an image.");
                return;
            }
    
            const feed = document.querySelector(".feed");
    
            const postDiv = document.createElement("div");
            postDiv.classList.add("post");
    
            const postHeader = document.createElement("div");
            postHeader.classList.add("post-header");
    
            postHeader.innerHTML = `
                <span class="poster-name">You</span>
                <span class="post-time">Just now</span>
            `;
    
            const postContent = document.createElement("p");
            postContent.textContent = postText;
    
            postDiv.appendChild(postHeader);
            postDiv.appendChild(postContent);
    
            if (previewImage) {
                const imageElement = document.createElement("img");
                imageElement.src = previewImage;
                imageElement.classList.add("image-preview");
                postDiv.appendChild(imageElement);
            }
    
            const postActions = document.createElement("div");
            postActions.classList.add("post-actions");
            postActions.innerHTML = `
                <button>👍 Like</button>
                <button>💬 Comment</button>
            `;
    
            postDiv.appendChild(postActions);
            feed.appendChild(postDiv);
    
            document.getElementById("post-text").value = "";
            document.getElementById("post-image").value = "";
            document.getElementById("image-preview-container").style.display = "none";
        });
    </script>
</body>
</html>